{% extends 'layout.twig' %}

{% block body %}
  <h1>{{title}}</h1>
  
  <div id="initializationMessage">Loading...</div>
  
  <div id="walletInitialization" style="display: none">
    <div>Please connect your wallet</div>
    <div><button id="walletConnectionButton" onclick="connectWallet()">Connect wallet</button></div>
  </div>

  <div id="accountDetails" style="display: none"><b>Account</b>: <span id="customerName"><i>No account</i></span> (address: <span id="customerAddress"></span>)</div>
  
  <div id="page" style="display: none">
    <h2>Token</h2>
    <div style="display: inline-block; height: 100%; text-align: center;">
      Current balance: <span id="balance">?</span>
      <span id="mintingNotification" style="display: none; margin-left: 30px;"><img src="images/loading.gif" width="20" class="spinner" />Minting ongoing</span>
    </div>
    <div><input type="number" id="amountOfUoA" size=7 placeholder="amount">&nbsp; &nbsp;<button id="mintingButton" onclick="mint()">Fiat -> Token</button></div>

    <h2>Items</h2>
    <div id="items"></div>

    <h2>Orders</h2>
    <div id="orders"></div>
    <div id="noOrderText"><i>No orders yet</i></div>
  </div>

  <div id="registration" style="display: none; margin-top: 30px">
    <div>Please register!</div>
    <div><label for="customerNameInput">Name: </label><input type="text" id="customerNameInput" placeholder="name" /> &nbsp; <button onclick="registerCustomer()">Register</button></div>
  </div>

  <div id="activityStreamContainer" style="display: none">
    <h2>Activity stream</h2>
    <div id="activityStream" style="height: 200px; overflow: auto; border: inset 1px black;"></div>
  </div>

  <div id="modalLayer" class="modal" onclick="closePopup(event)">
    <div class="modal-content">
      <span class="close" onclick="closePopup()">&times;</span>
      <div id="popupContent"></div>
    </div>
  </div>

  <script type="text/javascript">const currencyDecimals = {{currencyDecimals}}</script>
  <script type="text/javascript" src="javascripts/shared.js"></script>
  <script type="text/javascript" src="javascripts/customer.js"></script>
  <script type="text/javascript" src="javascripts/renderingHelpers.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
{% endblock %}
